---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import Services from '../components/Services.astro';
import { contentfulClient } from "../lib/contentful.js";
import { documentToHtmlString } from "@contentful/rich-text-html-renderer";
import type { Document } from "@contentful/rich-text-types";
import type { BlogPost } from "../lib/contentful";
import Sectors from '../components/Sectors.astro';

const entries = await contentfulClient.getEntries<BlogPost>({
  content_type: "blogPost",
  limit: 4,
});

const posts = entries.items.map((item) => {
  const { title, date, description, slug, image, type } = item.fields;
  return {
    title,
    slug,
    description,
    date: new Date(date).toLocaleDateString(undefined,{ weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }),
	imageDesc: image.fields.description,
	imageURL: image.fields.file.url,
	type
  };
});

console.log(posts); 
---

<Layout title="Heritage Consultants" 
	pageForHeader="home" 
	description="Heritage Consultants offers archaeological, GIS, architectural history, interpretive planning, grant writing, litigation research and much more.">
	<Hero></Hero>
  <Services></Services>
  <Sectors></Sectors>
</Layout>

<style>

</style>
